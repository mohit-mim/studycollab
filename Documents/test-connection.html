<!DOCTYPE html>
<html>

<head>
    <title>API Connection Test</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #222;
            color: #fff;
        }

        .status {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .success {
            background: green;
        }

        .error {
            background: red;
            ci
        }

        pre {
            background: #333;
            padding: 10px;
            border: 1px solid #555;
        }
    </style>
</head>

<body>
    <h1>API Connection Test</h1>
    <div id="status">Testing connection...</div>
    <button onclick="testConnection()">Test Again</button>
    <pre id="output"></pre>

    <script>
        async function testConnection() {
            const statusEl = document.getElementById('status');
            const outputEl = document.getElementById('output');

            statusEl.className = 'status';
            statusEl.textContent = 'Pinging http://localhost:5001/api/health ...';
            outputEl.textContent = '';

            try {
                const response = await fetch('http://localhost:5001/api/health');
                const text = await response.text();

                if (response.ok) {
                    statusEl.className = 'status success';
                    statusEl.textContent = '✅ Success! Server is reachable.';
                    outputEl.textContent = text;
                } else {
                    statusEl.className = 'status error';
                    statusEl.textContent = '⚠️ Server reached but returned error: ' + response.status;
                    outputEl.textContent = text;
                }
            } catch (error) {
                statusEl.className = 'status error';
                statusEl.textContent = '❌ Failed to connect: ' + error.message;
                outputEl.textContent = 'Potential causes:\n1. Server is not running\n2. CORS blocked the request\n3. Browser blocked localhost access';
                console.error(error);
            }
        }

        testConnection();
    </script>
</body>

</html>